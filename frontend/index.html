<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KYC Vision Extraction</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <div class="container"> <!-- Main layout wrapper -->
    <h1>DOC/KYC Vision Extraction</h1>
    <form id="uploadForm"> <!-- Upload form -->
      <div class="field-inline">
        <label>Source</label>
        <div class="mode-switch">
          <label><input type="radio" name="sourceMode" value="file" checked> File</label>
          <label><input type="radio" name="sourceMode" value="url"> URL</label>
        </div>
      </div>
      <div class="field-inline">
        <label>Extraction Mode</label>
        <div class="mode-switch">
          <label><input type="radio" name="extractMode" value="single" checked> Single Doc</label>
          <label><input type="radio" name="extractMode" value="multi"> Multi Doc</label>
        </div>
      </div>
      <div class="field-group" id="fileGroup">
        <label>Document Files (PDF / Image)</label>
        <div id="fileInputsWrap" class="stacked-inputs">
          <div class="dyn-input"><input type="file" name="files" accept=".pdf,.png,.jpg,.jpeg,.webp" /></div>
        </div>
        <button type="button" id="addFileBtn" class="mini-btn">+ Add another file</button>
        <small class="hint">Add multiple separate file boxes. Leave unused boxes empty.</small>
      </div>
      <div class="field-group hidden" id="urlGroup">
        <label>Source URL(s)</label>
        <div id="urlInputsWrap" class="stacked-inputs">
          <div class="dyn-input"><input type="url" name="source_urls" placeholder="https://example.com/doc1.pdf" /></div>
        </div>
        <button type="button" id="addUrlBtn" class="mini-btn">+ Add another URL</button>
        <small class="hint">Each URL has its own box. Empty boxes are ignored.</small>
      </div>
      <div class="field-inline">
        <label for="docType">Doc Type (optional)</label>
        <input id="docType" name="doc_type" placeholder="passport, national_id, ..." />
      </div>
  <small class="hint">Provide either files or URLs (mutually exclusive). Use the + buttons to add more.</small>
      <button id="submitBtn" type="submit">Extract</button>
    </form>

    <div id="status" class="status"></div>

  <section id="resultSection" class="hidden"> <!-- Extraction result area -->
      <h2>Result</h2>
      <div class="meta-block">
        <h3>Meta</h3>
        <pre id="metaPre"></pre>
      </div>
      <div class="fields-block">
        <h3>Canonical Fields</h3>
        <table id="fieldsTable"><thead><tr><th>Field</th><th>Value</th><th>Conf.</th></tr></thead><tbody></tbody></table>
      </div>
      <div class="fields-block">
        <h3>Extra Fields</h3>
        <table id="extraTable"><thead><tr><th>Field</th><th>Value</th><th>Conf.</th></tr></thead><tbody></tbody></table>
      </div>
      <div class="missing-block hidden" id="missingWrap">
        <h3>Missing Critical</h3>
        <ul id="missingList"></ul>
      </div>
      <div class="raw-json">
        <details>
          <summary>Raw JSON</summary>
          <pre id="rawJson"></pre>
        </details>
      </div>
      <div id="multiDocsContainer" class="hidden">
        <h3>Multi-Document Groups</h3>
        <div id="multiDocsList"></div>
      </div>
    </section>
  </div>
  <script src="/static/app.js"></script>
</body>
</html>
